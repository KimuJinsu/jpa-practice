
# 🌟 JPA (Java Persistence API)

## 📘 **소개**

JPA (Java Persistence API)는 자바 애플리케이션에서 데이터베이스와 상호작용할 수 있는 표준 API입니다.  
객체-관계 매핑(ORM)을 통해 자바 객체와 관계형 데이터베이스를 매끄럽게 연결하며,  
SQL을 직접 작성하지 않고도 데이터베이스 작업을 **객체 지향적**으로 처리할 수 있게 합니다.  

---

## 🚀 **주요 개념**

### 1️⃣ **Entity**
`Entity`는 데이터베이스 **테이블에 매핑되는 자바 클래스**입니다.  
비즈니스 도메인의 객체를 표현하며, 데이터베이스의 행(row)에 해당합니다.  

📝 **주요 어노테이션**
- `@Entity`: 클래스가 엔티티임을 선언합니다.
- `@Table`: 테이블 매핑을 지정합니다.

---

### 2️⃣ **Primary Key**
**Primary Key**는 데이터베이스의 각 **행을 고유하게 식별**하는 키입니다.  
엔티티에서 `@Id` 어노테이션을 사용해 정의하며, 자동 생성은 `@GeneratedValue`로 설정합니다.  

---

### 3️⃣ **EntityManager**
`EntityManager`는 JPA에서 가장 중요한 객체 중 하나로, 엔티티를 관리하고 데이터베이스와의 상호작용을 담당합니다.  

✨ **주요 역할**
- **생명주기 관리**: 엔티티 삽입, 수정, 삭제, 조회.
- **트랜잭션 처리**: 데이터베이스와의 모든 작업은 트랜잭션 내에서 이루어짐.
- **영속성 컨텍스트와 통합**.

---

### 4️⃣ **영속성 컨텍스트 (Persistence Context)**
**영속성 컨텍스트**는 엔티티 객체를 **메모리 상에서 관리**하는 공간입니다.  
데이터베이스와의 싱크(동기화)를 유지하며, 엔티티 객체의 상태를 관리합니다.  

---

### 5️⃣ **엔티티의 상태**

1. **영속 상태**: 영속성 컨텍스트에서 관리되고, 데이터베이스와 동기화된 상태.  
2. **비영속 상태**: 영속성 컨텍스트에서 관리되지 않고, 데이터베이스와 연결되지 않은 상태.  
3. **준영속 상태**: 한때 영속 상태였으나, 현재는 영속성 컨텍스트에서 분리된 상태.  

---

### 6️⃣ **JPQL (Java Persistence Query Language)**
**JPQL**은 JPA에서 사용하는 객체 지향 쿼리 언어입니다.  
SQL과 유사하지만, **엔티티와 필드를 기준**으로 데이터를 조회합니다.  

📝 **예제**
```java
SELECT e FROM Employee e WHERE e.salary > :salary
```

---

### 7️⃣ **트랜잭션 관리**
모든 데이터 변경 작업(삽입, 수정, 삭제)은 **트랜잭션** 내에서 실행됩니다.  
트랜잭션이 **커밋**되면 데이터베이스에 변경 사항이 반영되고,  
**롤백** 시 모든 변경이 취소됩니다.  

---

### 8️⃣ **관계 매핑 (Relationship Mapping)**
JPA는 객체 간의 관계를 **데이터베이스의 외래 키**로 매핑합니다.  
다음과 같은 관계를 지원합니다:  

- **일대일 (One-to-One)**  
- **일대다 (One-to-Many)**  
- **다대일 (Many-to-One)**  
- **다대다 (Many-to-Many)**  

📝 **사용 어노테이션**
- `@OneToOne`, `@OneToMany`, `@ManyToOne`, `@ManyToMany`  

---

## 🔗 **JPA의 이점**

- **객체 지향적인 데이터베이스 접근**: SQL 대신 객체를 사용하여 데이터 조작.  
- **자동화된 데이터베이스 관리**: 테이블 생성, 관계 매핑, 변경 사항 자동 처리.  
- **데이터베이스 독립성**: 특정 DB에 종속되지 않음.  
- **생산성 향상**: 간결한 코드로 개발 시간 단축 및 유지보수 용이.  
